## Index

데이터 레코드에 빠르게 접근하기 위해 '키 값, 포인터' 쌍으로 구성되는 데이터 구조

- 물리적 구조에 접근하는 방법 제공

- 빠른 액세스 가능

- 삽입, 삭제가 자주 일어난다면 인덱스 최소화


### 종류

- 트리 기반 인덱스
- 비트맵 인덱스
- 함수 기반 인덱스
- 비트맵 조인 인덱스
- 도메인 인덱스

### 클러스터드/넌클러스터드 인덱스

**클러스터드 인덱스**
- 키 순서에 따라 데이터가 정렬되어 저장
- 실제 데이터가 순서대로 저장되어 있어 인덱스를 검색하지 않아도 빠른 액세스

**넌클러스터드 인덱스**
- 인덱스의 키 값만 정렬되어 있고 실제 데이터는 정렬되지 않음
- 데이터 삽입, 삭제 발생 시 순서를 유지하기 위해 데이터 재정렬

<br/>

## View

*하나 이상의 기본 테이블로부터 유도*된, 이름을 가지는 **가상 테이블**

물리적으로 존재하지 않음

> 장점

- 논리적 데이터 독립성 제공
- 동일 데이터에 대해 동시에 여러 사용자의 상이한 응용이나 요구 지원
- 데이터 관리 간편
- 접근 제어를 통한 보안성

> 단점

- 독립적 인덱스 가질 수 없음
- 뷰의 정의 변경 불가
- 삽입, 삭제, 갱신 연산에 제약 따름

<br/>

## Cluster

동일한 성격의 데이터를 동일한 데이터 블록에 저장하는 물리적 저장 방법

- 데이터 액세스 효율 향상
- 입력, 수정, 삭제 성능 저하
- 데이터 분포도가 넓을수록 유리(저장 공간 절약)

### 종류

- 처리 범위가 넓으면 단일 테이블 클러스터링
- 조인이 많이 발생하면 다중 테이블 클러스터링


<br/>

## 파티션

대용량의 테이블이나 인덱스를 *작은 논리적 단위* 파티션으로 나누는 것

- 성능 저하 방지
- 데이터 관리 수월
- 처리는 테이블 단위로, 저장은 파티션별로

### 장・단점

> 장점

- 데이터 접근 시 액세스 범위 줄여 → 쿼리 성능 향상
- 데이터 분산 저장으로 디스크 성능 향상
- 파티션별로 백업 및 복구 수행 → 속도 빠름
- 시스템 장애 시 데이터 손상 최소화
- 데이터 가용성 향상
- 파티션 단위로 입・출력 분산

> 단점

- 테이블 세분화 관리로 세심한 관리 요구
- 테이블 조인 비용 증가
- 용량이 작은 테이블에 파티셔닝하면 성능 저하

### 종류

> 범위 분할

지정한 열의 값을 기준으로 분할함

ex: 일별, 월별, 분기별

> 해시 분할

해시 함수를 적용한 결과 값에 따라 데이터를 분할함

- 데이터 집중되는 범위 분할의 단점 보완
- 특정 데이터가 어디에 있는지 판단 불가
- 고객번호, 주민번호 등 데이터가 고른 컬럼에 효과적

> 조합 분할

범위 분할로 분할한 다음 해시 함수를 적용하여 다시 분할

범위 분할한 파티션이 너무 커서 관리가 어려울 때 유용

<br/>

## 분산 데이터베이스 설계

> 데이터베이스 용량 설계

데이터가 저장될 공간을 정의하는 것

저장될 데이터 양과 인덱스, 클러스터 등이 차지하는 공간 등을 예측

**목적**
- 용량을 정확히 산정하여 디스크의 저장 공간을 효과적으로 사용하고 확장성 및 가용성을 높임
- 디스크 특성을 고려해 설계함으로써 디스크의 입출력 부하를 분산시키고 채널의 병목 현상을 최소화

### 분산 데이터베이스 설계

**논리적으로는 하나의 시스템**에 속하지만 **물리적으로는 네트워크를 통해 연결된 여러 개의 사이트에 분산**된 데이터베이스

- 데이터 처리나 이용이 많은 지역에 데이터베이스 위치시켜 해당 지역에서 데이터 처리 가능케 함
- 애플리케이션이나 사용자가 분산된 데이터에 접근하게 하는 것을 목적으로 함

### 분산 데이터베이스의 목표

> 위치 투명성

액세스하려는 데이터베이스의 실제 위치 알 필요 없이 논리적인 명칭만으로 액세스

> 중복 투명성

동일 데이터가 여러 곳에 중복되어 있어도 사용자는 하나의 데이터만 존재하는 것처럼 사용

시스템은 자동으로 여러 자료에 대한 작업 수행

> 병행 투명성

다수의 트랜잭션이 동시에 실현되어도 그 트랜잭션의 결과는 영향을 받지 않는다.

> 장애 투명성

트랜잭션, DBMS, 네트워크, 컴퓨터 장애에도 불구하고 트랜잭션을 정확하게 처리한다.

### 분산 설계 방법

1. 테이블 위치 분산
    - 테이블을 각기 다른 서버에 분산시켜 배치
1. 분할
    - 테이블의 데이터를 분할하여 분산
    - 규칙: 완전성, 재구성, 상호 중첩 배제
    - 수평 분할, 수직 분할
1. 할당
    - 동일한 분할을 여러 개의 서버에 생성
    - 중복이 있는 할당과 없는 할당으로 나뉨

<br/>

## 데이터 이중화 & 서버 클러스터링

### DataBase Replication

시스템 오류로 서비스 중단이나 물리적 손상이 발생했을 때 복구하기 위해 **동일한 데이터베이스를 복제하여 관리**하는 것

- 하나 이상의 데이터베이스가 항상 같은 상태 유지 → 문제 발생 시 즉시 해결

- 여러 데이터베이스를 동일하게 관리하므로 사용자가 수행하는 작업은 동일하게 적용

- 애플리케이션을 여러 개의 데이터베이스에 분산 처리 → 부하 줄임

- 백업 서버 운영 수월


> 분류

**Eager**

트랜잭션 수행 중 데이터 변경이 발생하면 즉시 이중화된 모든 DB에 적용

**Lazy**

트랜잭션 수행이 종료되면 변경 사실을 새로운 트랜잭션에 작성하여 각 DB에 전달

DB마다 새로운 트랜잭션이 수행되는 것으로 간주

> 구성 방법

**활동-대기**

한 DB 활성 / 다른 DB 대기

장애 발생 시 대기하던 데이터베이스가 자동으로 대신 수행

- 구성 방법과 관리가 쉬움

**활동-활동**

두 DB가 서로 다른 서비스 제공

한쪽에 문제 발생 시 남은 쪽이 서비스 제공

- 처리율이 높지만 구성 방법 및 설정이 복잡함


### Clustering

두 대 이상의 서버를 하나의 서버처럼 운영하는 기술

서버 이중화 및 공유 스토리지를 사용하여 서버의 **고가용성**을 제공

- 시스템을 오랜 시간동안 계속해서 정상적으로 운영 가능한 성질

> 분류

**고가용성 클러스터링**

- 하나의 서버에 장애가 발생하면 다른 노드(서버)가 받아 처리해 중단 방지

- 일반적으로 언급하는 클러스터링

**병렬 처리 클러스터링**

- 전체 처리율을 높이기 위해 하나의 작업을 여러 서버에서 분산 처리

### RTO/RPO

**Recovery Time Objective**

비상사태 또는 업무 중단 시점으로부터 복구되어 가동될 때까지의 소요 시간

**Recovery Point Objective**

비상사태 또는 업무 중단 시점으로부터 데이터를 복구할 수 있는 기준점